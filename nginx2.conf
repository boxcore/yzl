# nginx configuration

location /admin {
  rewrite ^/admin/*$ /admin/index.php break;
}

location /index {
  rewrite ^/index\.html$ /index\.php break;
}

location = /category {
  rewrite ^(.*)$ /index\.php break;
}

location /feed {
  rewrite ^/feed-c([0-9]+)\.xml$ /feed\.php\?cat=$1 break;
  rewrite ^/feed-b([0-9]+)\.xml$ /feed\.php\?brand=$1 break;
  rewrite ^/feed-type([^-]+)\.xml$ /feed\.php\?type=$1 break;
  rewrite ^/feed\.xml$ /feed\.php break;
}

location /category {
  rewrite ^/category-([0-9]+)[\/]*$ /category\.php\?defurl=$1 break;
  rewrite ^/category-([0-9]+)-b([0-9]+)-min([0-9]+)-max([0-9]+)-attr([^-]*)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$ /category\.php\?id=$1&brand=$2&price_min=$3&price_max=$4&filter_attr=$5&page=$6&sort=$7&order=$8 break;
  rewrite ^/category-([0-9]+)-b([0-9]+)-min([0-9]+)-max([0-9]+)-attr([^-]*)(.*)\.html$ /category\.php\?id=$1&brand=$2&price_min=$3&price_max=$4&filter_attr=$5 break;
  rewrite ^/category-([0-9]+)-b([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$ /category\.php\?id=$1&brand=$2&page=$3&sort=$4&order=$5 break;
  rewrite ^/category-([0-9]+)-b([0-9]+)-([0-9]+)(.*)\.html$ /category\.php\?id=$1&brand=$2&page=$3 break;
  rewrite ^/category-([0-9]+)-b([0-9]+)(.*)\.html$ /category\.php\?id=$1&brand=$2 break;
  rewrite ^/category-([0-9]+)(.*)\.html$ /category\.php\?id=$1 break;
}

location / {
  rewrite ^/([0-9a-zA-Z_]+)(?:-b([0-9]+))?-min([0-9]+)-max([0-9]+)-attr([^-]*)-([0-9]+)-(.+)-([a-zA-Z]+)[\/]*$ /category\.php\?defurl=$1&brand=$2&price_min=$3&price_max=$4&filter_attr=$5&page=$6&sort=$7&order=$8 break;
  rewrite ^/([0-9a-zA-Z_]+)(?:-b([0-9]+))?-min([0-9]+)-max([0-9]+)-attr([^-]*)[\/]*$ /category\.php\?defurl=$1&brand=$2&price_min=$3&price_max=$4&filter_attr=$5 break;
  rewrite ^/([0-9a-zA-Z_]+)(?:-b([0-9]+))?-([0-9]+)-(.+)-([a-zA-Z]+)[\/]*$ /category\.php\?defurl=$1&brand=$2&page=$3&sort=$4&order=$5 break;
  rewrite ^/([0-9a-zA-Z_]+)(?:-b([0-9]+))?-([0-9]+)[\/]*$ /category\.php\?defurl=$1&brand=$2&page=$3 break;
  rewrite ^/([0-9a-zA-Z_]+)-b([0-9]+)[\/]*$ /category\.php\?defurl=$1&brand=$2 break;
  rewrite ^/([0-9a-zA-Z_]+)[\/]*$ /category\.php\?defurl=$1 break;
  rewrite ^/(?:[0-9a-zA-Z_]+)/([0-9a-zA-Z_-]+)(.*)\.html$ /goods\.php\?defurl=$1 break;
}

location /goods {
  rewrite ^/goods-([0-9]+)(.*)\.html$ /goods\.php\?id=$1 break;
}

location /page {
  rewrite ^/page\/brand_download[\/]*$ /article_cat\.php\?defurl=wallpaper break;
  rewrite ^/page\/5[\/]*$ /article_cat\.php\?defurl=wallpaper break;
  rewrite ^/page\/3[\/]*$ /article_cat\.php\?defurl=online_wall break;
  rewrite ^/page\/9[\/]*$ /article_cat\.php\?defurl=10 break;
  rewrite ^/page\/8[\/]*$ /article_cat\.php\?defurl=21 break;
  rewrite ^/page\/([0-9a-zA-Z_]+)-([0-9]+)-(.+)-([a-zA-Z]+)[\/]*$ /article_cat\.php\?defurl=$1&page=$2&sort=$3&order=$4 break;
  rewrite ^/page\/([0-9a-zA-Z_]+)-([0-9]+)-(.+)[\/]*$ /article_cat\.php\?defurl=$1&page=$2&keywords=$3 break;
  rewrite ^/page\/([0-9a-zA-Z_]+)-([0-9]+)[\/]*$ /article_cat\.php\?defurl=$1&page=$2 break;
  rewrite ^/page\/([0-9a-zA-Z_]+)[\/]*$ /article_cat\.php\?defurl=$1 break;
}

location /article {
  rewrite ^/article-(?:[0-9a-zA-Z_]+)/([0-9]+)(.*)\.html$ /article\.php\?id=$1 break;
  rewrite ^/article-([0-9]+)(.*)\.html$ /article\.php\?id=$1 break;
}

location /article_cat {
  rewrite ^/article_cat-([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$ /article_cat\.php\?id=$1&page=$2&sort=$3&order=$4 break;
  rewrite ^/article_cat-([0-9]+)-([0-9]+)-(.+)(.*)\.html$ /article_cat\.php\?id=$1&page=$2&keywords=$3 break;
  rewrite ^/article_cat-([0-9]+)-([0-9]+)(.*)\.html$ /article_cat\.php\?id=$1&page=$2 break;
  rewrite ^/article_cat-([0-9]+)(.*)\.html$ /article_cat\.php\?id=$1 break;
}

location /brand {
  rewrite ^/brand-([0-9a-zA-Z_]+)(?:-c([0-9]+))?-([0-9]+)-(.+)-([a-zA-Z]+)[\/]*$ /brand\.php\?defurl=$1&cat=$2&page=$3&sort=$4&order=$5 break;
  rewrite ^/brand-([0-9a-zA-Z_]+)(?:-c([0-9]+))?-([0-9]+)[\/]*$ /brand\.php\?defurl=$1&cat=$2&page=$3 break;
  rewrite ^/brand-([0-9a-zA-Z_]+)(?:-c([0-9]+))?[\/]*$ /brand\.php\?defurl=$1&cat=$2 break;
  rewrite ^/brand-([0-9a-zA-Z_]+)[\/]*$ /brand\.php\?defurl=$1 break;
}

location /includes {
  rewrite ^/includes(.*)$ /includes$1 break;
}

location /tag {
  rewrite ^/tag-(.*)\.html /search\.php\?keywords=$1 break;
}

location /snatch {
  rewrite ^/snatch-([0-9]+)\.html$ /snatch\.php\?id=$1 break;
}

location /group_buy {
  rewrite ^/group_buy-([0-9]+)\.html$ /group_buy\.php\?act=view&id=$1 break;
}

location /auction {
  rewrite ^/auction-([0-9]+)\.html$ /auction\.php\?act=view&id=$1 break;
}

location /exchange {
  rewrite ^/exchange-id([0-9]+)(.*)\.html$ /exchange\.php\?id=$1&act=view break;
  rewrite ^/exchange-([0-9]+)-min([0-9]+)-max([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$ /exchange\.php\?cat_id=$1&integral_min=$2&integral_max=$3&page=$4&sort=$5&order=$6 break;
  rewrite ^/exchange-([0-9]+)-([0-9]+)-(.+)-([a-zA-Z]+)(.*)\.html$ /exchange\.php\?cat_id=$1&page=$2&sort=$3&order=$4 break;
  rewrite ^/exchange-([0-9]+)-([0-9]+)(.*)\.html$ /exchange\.php\?cat_id=$1&page=$2 break;
  rewrite ^/exchange-([0-9]+)(.*)\.html$ /exchange\.php\?cat_id=$1 break;
}